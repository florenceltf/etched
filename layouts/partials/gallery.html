<div class="gallery columns is-multiline">
  {{ range . }}

  {{ if eq .template "portrait-image" }}

  {{ $image := resources.Get .image }}
  {{ $smallImage := $image.Resize "20x" }}

  <div class="column is-4 is-offset-4 project-image portrait">

    <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImage.Content | base64Encode  }}" data-src="{{ $image.RelPermalink }}" data-sizes="auto"
      alt="{{ .alt }}" class="lazyload {{ .template }}">
    {{ with .caption }}<span class="caption">{{ . }}</span>{{ end }}
  </div>

  {{ else if eq .template "landscape-image" }}

  {{ $image := resources.Get .image }}
  {{ $smallImage := $image.Resize "20x" }}

  <div class="column is-6 is-offset-3 project-image landscape">
    <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImage.Content | base64Encode  }}" data-src="{{ $image.RelPermalink }}" alt="{{ .alt }}"
      class="lazyload {{ .template }}">
    {{ with .caption }}<span class="caption">{{ . }}</span>{{ end }}
  </div>

  {{ else if eq .template "landscape-full-image" }}

  {{ $image := resources.Get .image }}
  {{ $smallImage := $image.Resize "20x" }}

  <div class="column is-8 is-offset-2 project-image landscape-full">
    <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImage.Content | base64Encode  }}" data-src="lazyload {{ $image.RelPermalink }}" alt="{{ .alt }}"
      class="{{ .template }}">
    {{ with .caption }}<span class="caption">{{ . }}</span>{{ end }}
  </div>

  {{ else if eq .template "landscape-side-image" }}

  {{ $imageLeft := resources.Get .image }}
  {{ $smallImageLeft := $image.Resize "20x" }}
  {{ $imageRight := resources.Get .image }}
  {{ $smallImageRight := $image.Resize "20x" }}

  <div class="column is-8 is-offset-2 project-image landscape-side">
    <div class="column">
      <div class="columns is-mobile">
        <div class="column">
          <div class="bd-notification is-info">
            <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImageLeft.Content | base64Encode  }}" data-src="{{ $imageLeft.RelPermalink }}" alt="{{ .alt }}"
              class="lazyload {{ .template }}">
          </div>
        </div>
        <div class="column">
          <div class="bd-notification is-info">
            <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImageRight.Content | base64Encode  }}" data-src="{{ $imageRight.RelPermalink }}" alt="{{ .alt }}"
              class="lazyload {{ .template }}">
          </div>
        </div>
      </div>
    </div>
  </div>

  {{ else if eq .template "portrait-side-image" }}

  {{ $imageLeft := resources.Get .image }}
  {{ $smallImageLeft := $image.Resize "20x" }}
  {{ $imageRight := resources.Get .image }}
  {{ $smallImageRight := $image.Resize "20x" }}

  <div class="column is-6 is-offset-3 project-image portrait-side">
    <div class="column">
      <div class="columns is-mobile">
        <div class="column">
          <div class="bd-notification is-info">
            <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImageLeft.Content | base64Encode  }}" data-src="{{ $imageLeft.RelPermalink }}" alt="{{ .alt }}"
              class="lazyload {{ .template }}">
          </div>
        </div>
        <div class="column">
          <div class="bd-notification is-info">
            <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImageRight.Content | base64Encode  }}" data-src="{{ $imageRight.RelPermalink }}" alt="{{ .alt }}"
              class="lazyload {{ .template }}">
          </div>
        </div>
      </div>
    </div>
  </div>

  {{ else if eq .template "portrait-quote-image" }}

  {{ $image := resources.Get .image }}
  {{ $smallImage := $image.Resize "20x" }}

  <div class="column is-6 is-offset-3 project-image portrait-quote">
    <div class="column">
      <div class="columns is-mobile">
        <div class="column">
          <div class="bd-notification is-info">
            <img style="width: 100%" src="data:image/jpeg;base64,{{ $smallImage.Content | base64Encode  }}" data-src="{{ $image.RelPermalink }}" alt="{{ .alt }}"
              class="lazyload {{ .template }}">
          </div>
        </div>
        <div class="column">
          <div class="bd-notification is-info">
            {{ .quote }}
          </div>
        </div>
      </div>
    </div>
  </div>

  {{ else if eq .template "landscape-portrait-bottom-image" }}

  <div class="column is-6 is-offset-3 project-image landscape">
    TODO: Landscape portrait bottom
  </div>

  {{ else }}

  <div style="color:red" class="column is-6 is-offset-3 project-image">
    Unsupported layout: {{ .template }}
  </div>

  {{ end }}

  {{ end }}
</div>
